### Cluster

#### InterviewBit

##### 1.Enhancing Node.js performance through clustering.

Node.js applications run on a single processor, which means that by default they donâ€™t take advantage of a multiple-core system. Cluster mode is used to start up multiple node.js processes thereby having multiple instances of the event loop. When we start using cluster in a nodejs app behind the scene multiple node.js processes are created but there is also a parent process called the cluster manager which is responsible for monitoring the health of the individual instances of our application.

![Cluster](https://s3.ap-south-1.amazonaws.com/myinterviewtrainer-domestic/public_assets/assets/000/000/046/original/clustering_in_Nodejs.png?1614761684)

```js
const cluster = require("cluster");
const cpuCount = require("os").cpus().length;
const express = require("express");
const app = express();
const http = require("http");

if (cluster.isMaster) {
  console.log("is Master");
  for (x = 0; x < cpuCount; x++) {
    cluster.fork();
  }
} else {
  app.get("/", (req, res) => {
    res.status(200).send(`${process.pid}`);
  });

  app.listen(8001, () => {
    console.log("app connected");
  });
}
```
